Import dataset from Metamorph NX
================================

Necessity
---------
It can be useful to import Metamorph NX data into Metamorph 7.
Metamorph 7 imports all data as stacks, and multidimensional data from
NX gets imported as a single stack with the channel images in a single
stack instead of separate stacks.

Splitting the stacks manually would require:

1.  Open the Experiment info.dataset file
2.  Run "Stack" > "Keep Planes"
3.  Set the "High Range" to size of the full stack
4.  Set Action to "Copy Selected"
5.  Set "Step Size" to the number of channels in the dataset
6.  Set the "Low Range" to the channel number being split
7.  Click "Select Planes in Range"
8.  Run "Apply" for each channel.  This creates the new stack
9.  Click "Clear All" and repeat from step 6 for all channels

Solution
--------
"Keep Planes" cannot be overwritten for all the values we need, so
each plane traversed using the image properties and copied into a new
stack.

Installation
------------
Add the buttons `split_channels_from_nx_dataset.JNL` to the journal
taskbar

User interaction
----------------
Button: `Split Channels`

> 1.  Enter number of channels in dataset
> 2.  Click "OK"

<!-- content below automatically generated by doc_jnl.py -->
Source Code
-----------
split_channels_from_nx_dataset.JNL:
```python
'''
Split NX Dataset into channel stacks
'''
# Author: Bruce Gonzaga

Enter_Variable(8 channels,
               3,
               18 Number of Channels,
               TRUE,
               2,
               10,
               1,
               13 # of Channels,
               0 ,
               FALSE,
               -1,
               -1)
planes = Image.NumPlanes
# Autoscale is off by default on opened dataset
Scale_Image(m	1 5 10 0 1 -1 -1 8 Untitled ,
            1,
            TRUE,
            0,
            65535,
            0,
            0,
            TRUE,
            0,
            65535,
            0,
            0,
            TRUE,
            0,
            65535,
            0,
            0,
            TRUE,
            0,
            65535,
            0,
            0,
            FALSE)

for current_channel in range(1, channels+1, 1):,
        Trace("Current Channel: " + str(current_channel))
    channel_name = "Channel " + str(current_channel)
    
    for current_plane in range(current_channel, planes+1, channels):,
        Select_Image(m	1 5 9 0 1 -1 -1 8 Untitled ,
             0 )
    Trace("Current Image: " + str(current_plane))
    Image.ActivePlane = current_plane
    Add_Plane(m	1 5 9 0 1 -1 -1 8 Untitled ,
          m	0 6 14 16 1 -1 -1 14 %channel_name% ,
          FALSE,
          9)

    Select_Image(m	1 7 9 0 1 4 0 8 Untitled ,
             0 )
    Image.ActivePlane = Image.NumPlanes / 2
    Scale_Image(m	1 3 10 0 1 -1 -1 8 Untitled ,
            1,
            TRUE,
            0,
            65535,
            0,
            0,
            TRUE,
            0,
            65535,
            0,
            0,
            TRUE,
            0,
            65535,
            0,
            0,
            TRUE,
            0,
            65535,
            0,
            0,
            FALSE)

Select_Image(m	1 5 9 0 1 -1 -1 8 Untitled ,
             0 )
Image.ActivePlane = Image.NumPlanes / 2
```
