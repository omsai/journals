<Journal><Description>Record laser power on a per-illumination basis.  [Requires] illumination name must end in 3 digits of laser wavelength</Description><Version VersionNumber="2.4"/><CodeBlock><CommentEntry></CommentEntry><CommentEntry>Get the current laser intensity if it exists.  This is valuable feedback for the user to see what the intensity was before changing</CommentEntry><FunctionEntry GUID="{0x79f510e8-0xe09c-0x11d3-0x93-0x9a-0x0-0x10-0x5a-0x4-0x2f-0x99}" FunctionName="Run Journal" Interactive="0" ApplicationName="journal" VersionNumber="1" CommandID="1" MetaJournal="0CD03380" IsCurrentVersion="1" Variables="0CD031D4"><Variable Type="String" Name="ExecuteJournalJNL.stExecuteJournal" NDimensions="0" Override="" OverrideVariable="">50 C:\MM\app\mmproc\journals\laser\_get_intensity.jnl</Variable></FunctionEntry><CommentEntry></CommentEntry><CommentEntry>Extract wavelength from illumination name.  If the channel does not end in 3 digits, the prompt defaults to the first component name</CommentEntry><AssignVariableEntry VariableName="wavelength_STR" Expression="RIGHT(current_illumination_name,3)"/><AssignVariableEntry VariableName="wavelength" Expression="VAL(wavelength_STR)"/><CommentEntry></CommentEntry><CommentEntry>Prompt the user to set the correct intensity</CommentEntry><FunctionEntry GUID="{0xddcbcf00-0x9656-0x4341-0xa3-0xca-0xea-0x8-0xda-0xac-0x8a-0xf3}" FunctionName="Component Control" ApplicationName="mmproc" ExecuteMode="1" Interactive="1" VersionNumber="1" MissingImage="0" CommandID="2" MetaJournal="091C4648" IsCurrentVersion="1" Variables="091C449C"><Variable Type="String" Name="jnlComponentControl.stComponentName" NDimensions="0" Override="Variable" OverrideVariable="wavelength_STR + &quot; Laser Intensity&quot;">19 405 Laser Intensity</Variable><Variable Type="Double" Name="jnlComponentControl.dPosition" NDimensions="0" Override="LastValue" OverrideVariable="Position">51</Variable></FunctionEntry><CommentEntry></CommentEntry><CommentEntry>Record intensity from component control into a variable</CommentEntry><IfThenElseEntry Expression="wavelength = 405"><CodeBlock Condition="true"><AssignVariableEntry Disabled="0" VariableName="laser_intensity" Expression="Component.405_Laser_Intensity.Position"/></CodeBlock><CodeBlock Condition="false"><IfThenElseEntry Expression="wavelength = 445"><CodeBlock Condition="true"><AssignVariableEntry Disabled="0" VariableName="laser_intensity" Expression="Component.445_Laser_Intensity.Position"/></CodeBlock><CodeBlock Condition="false"><IfThenElseEntry Expression="wavelength = 488"><CodeBlock Condition="true"><AssignVariableEntry Disabled="0" VariableName="laser_intensity" Expression="Component.488_Laser_Intensity.Position"/></CodeBlock><CodeBlock Condition="false"><IfThenElseEntry Expression="wavelength = 515"><CodeBlock Condition="true"><AssignVariableEntry Disabled="0" VariableName="laser_intensity" Expression="Component.515_Laser_Intensity.Position"/></CodeBlock><CodeBlock Condition="false"><IfThenElseEntry Expression="wavelength = 561"><CodeBlock Condition="true"><AssignVariableEntry Disabled="0" VariableName="laser_intensity" Expression="Component.561_Laser_Intensity.Position"/></CodeBlock><CodeBlock Condition="false"/></IfThenElseEntry></CodeBlock></IfThenElseEntry></CodeBlock></IfThenElseEntry></CodeBlock></IfThenElseEntry></CodeBlock></IfThenElseEntry><CommentEntry></CommentEntry><CommentEntry>Store in INI file for persistent storage</CommentEntry><FunctionEntry GUID="{0xfff247b4-0x87de-0x4382-0x8c-0x28-0x8c-0x8c-0x21-0xa0-0x23-0xdd}" FunctionName="Write INI String" Interactive="0" ApplicationName="mmproc" VersionNumber="1" MissingImage="0" CommandID="3" MetaJournal="09185BE0" IsCurrentVersion="1" Variables="09185A34"><Variable Type="String" Name="jnlWriteIniString.stIniPath" NDimensions="0" Override="None" OverrideVariable="IniPath">49 C:\MM\app\mmproc\journals\illumination_values.ini</Variable><Variable Type="String" Name="jnlWriteIniString.stIniSection" NDimensions="0" Override="None" OverrideVariable="IniSection">17 Laser Intensities</Variable><Variable Type="String" Name="jnlWriteIniString.stIniKey" NDimensions="0" Override="Variable" OverrideVariable="current_illumination_name">12 Confocal 488</Variable><Variable Type="String" Name="jnlWriteIniString.stExpression" NDimensions="0" Override="Variable" OverrideVariable="laser_intensity">9 20.000000</Variable></FunctionEntry></CodeBlock></Journal>
