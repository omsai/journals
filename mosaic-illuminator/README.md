<!-- content below automatically generated by doc_jnl.py -->
Source Code
-----------
Acuire with Mosaic as Illuminator with Stream.JNL:
```python
'''
Use the mosaic as a shutter to image only an area of interest, then pulse the
laser at full power in a different ROI at the specified time point.
Immediately after the bleach, perform a 100 frame Stream, then continue normal
timelapse collection.   [Prerequisites]   The Mosaic Targetted Illumination
dialog should be configured   The first segment of the timelapse should be
configured to have 0 time interval, leading up to, at least, the time point
used to bleach.   The ROIs used for imaging and bleach should be saved prior
to running the experiment.  Use the 'Save Image Region' and 'Save Bleach
Region' journals to do so.   The \Mosaic As Illuminator\Setup Before Running
Experiment.JNL should be run prior to running the experiment.    [References]
\Mosaic as Illuminator\Prepare For Recovery.JNL is used to re-configure the
Mosaic for imaging after bleaching occurs.   \Mosaic as Illuminator\Prepare
For Bleach.JNL is used to re-configure the Mosaic for bleaching at the time
point prior to the bleach.
'''
Select_Illumination()
N = N+1
if N=pulseTimePoint:,
        Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\Prepare For Recovery.JNL)
    Configure_Stream_Acquisition()
    Stream_Acquisition()
    Add_Plane()
,
    else:
    Acquire()

if N=pulseTimePoint-1:,
        Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\Prepare For Bleach.JNL)
,
    else:

```

Acuire with Mosaic as Illuminator.JNL:
```python
'''
Use the mosaic as a shutter to image only an area of interest, then pulse the
laser at full power in a different ROI at the specified time point.
[Prerequisites]   The Mosaic Targetted Illumination dialog should be
configured   The first segment of the timelapse should be configured to have 0
time interval, leading up to, at least, the time point used to bleach.   The
ROIs used for imaging and bleach should be saved prior to running the
experiment.  Use the 'Save Image Region' and 'Save Bleach Region' journals to
do so.   The \Mosaic As Illuminator\Setup Before Running Experiment.JNL should
be run prior to running the experiment.    [References]   \Mosaic as
Illuminator\Prepare For Recovery.JNL is used to re-configure the Mosaic for
imaging after bleaching occurs.   \Mosaic as Illuminator\Prepare For
Bleach.JNL is used to re-configure the Mosaic for bleaching at the time point
prior to the bleach.
'''
Select_Illumination()
N = N+1
if N=pulseTimePoint:,
        Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\Prepare For Recovery.JNL)
,
    else:

Acquire()
if N=(pulseTimePoint-1):,
        Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\Prepare For Bleach.JNL)
,
    else:

```

load bleach region.JNL:
```python
'''
Load the ROI used for Bleaching for a targeted illumination experiment and
update the current mask used for illumination.
'''
Load_Regions()
Targeted_Illumination_Update_Mask()
```

load image region.JNL:
```python
'''
Load the ROIs used for Imaging with the Mosaic during targeted illumination,
and update the mask to use the current regions.
'''
Load_Regions()
Targeted_Illumination_Update_Mask()
```

MDA with Mosaic as Illuminator.JNL:
```python
'''
Use the mosaic as a shutter to image only an area of interest, then pulse the
laser at full power in a different ROI at the specified time point, as part of
an MDA experiment.   [Prerequisites]   The Mosaic Targetted Illumination
dialog should be configured for proper magnification, bleach duration, and
bleach illumination.   MDA should use this journal to run at the 'Start of
timepoint'   The ROIs used for imaging and bleach should be saved prior to
running the experiment.  Use the 'Save Image Region' and 'Save Bleach Region'
journals to do so.   To ensure proper timing, the time interval for the MDA
timelapse should be set to 0.  If a recovery time interval is needed, set it
as part of this, or another journal.    [References]   \Mosaic as
Illuminator\Prepare For Recovery.JNL is used to re-configure the Mosaic for
imaging after bleaching occurs.   \Mosaic as Illuminator\Prepare For
Bleach.JNL is used to re-configure the Mosaic for bleaching at the time point
prior to the bleach.
'''
# Get current MDA wavelength illumination name
CurIllum = Device.Illumination.Setting
if MDA.Status.TimePointNum=pulseTimePoint:,
        Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\Prepare For Bleach.JNL)
    Targeted_Illumination()
    Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\Prepare For Recovery.JNL)
,
    else:

```

Prepare For Bleach.JNL:
```python
'''
Prepare Mosaic for Bleaching by clearing the imaging region and loading the
bleaching region, triggering laser power, and waiting for the power to be
ready.  Default hardware configuration has the laser power at full power for 6
seconds after being triggered.  To ensure the first post-bleach time point is
as close to the bleach as possible, and to make sure the laser power is at
stand-bye for imaging, we push the pulse to the END of a 6 second delay.
[Prerequisites] The region used to Bleach the sample should be saved into a
file called 'bleach.rgn' in the same directory as the journal.  It is easiest
to use the 'Save Bleach Region' journal to save the ROI to ensure it is in the
proper place. The variable 'pulseDuration' should bdefined prior to this
journal so the proper wait period is used before bleaching.  This value should
be the same as the Duration entered into the Targeted Illumination dialog box
used to control the Mosaic bleaching.  It is easiest to set this value via the
'Setup Mosaic Experiment' command on the taskbar.  [References] The 'load
bleach region.jnl' journal is called to load the proper ROI and update the
Mosaic's mask.
'''
# Delete current imaging region and load bleach target
Delete_Active_Region()
Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\load bleach region.JNL)
Load_Regions()
Targeted_Illumination_Update_Mask()
# Toggle Laser Power illumination setting to get laser to full power. 
Component_Control()
# Delay to get to full power
Delay()
# Power will be up for 6 seconds, do bleach at END of 6 seconds
Delay()
```

Prepare For Recovery.JNL:
```python
'''
After Bleaching the sample, The mosaic must be re-targetted for the
acquisition region.  That means re-setting the Laser Power to standby,
clearing the bleaching region, and reloading the imaging region.
[Prerequisites] The ROIs used for imaging the sample should be saved to a file
named 'image.rgn' in the same directory as this journal.  It is easiest to use
the 'Save Imaging Region' journal to make sure the ROIs get saved to the
correct location. The variable 'CurIllum' should be defined prior to running
this journal.  It represents the illumination setting used for imaging (should
have the Mosaic as the Shutter).  The 'CurIllum' variable is read as part of
the 'Setup Mosaic Experiment' taskbar command.  [References] The journal 'load
image region.jnl' is used to load the proper 'image.rgn' file - the ROIs that
should be used for imaging.
'''
# Turn laser power back to standby
Component_Control()
Delete_Active_Region()
# Reset illumination setting for imaging in MDA experiment
Device.Illumination.Setting = CurIllum
# Reload imaging region
Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\load image region.JNL)
Load_Regions()
Targeted_Illumination_Update_Mask()
```

save bleach region.JNL:
```python
'''
Save the ROIs used for Bleaching in the Mosaic Targeted Illumination
Experiment to the same location as this journal, so that they may be loaded
back again as needed.
'''
Save_Regions()
```

save image region.JNL:
```python
'''
Save the ROIs used for the Imaging portion of a Mosaic Targeted Illumination
experiment to a file named 'image.rgn' in the same location as the journals so
they can be loaded back again as needed.
'''
Save_Regions()
```

Setup Before Running Experiment.JNL:
```python
'''
Configure Regions, time points, and durations for the Targeted Illumination
experiments that use the Mosaic as the illuminator and bleaching source.  The
key to the experiment is using two different sets of ROIs, one for imaging,
and one for bleaching, and knowing when to switch between them.  This journal
is used to record the ROI positions used for the Imaging step and Bleaching
step separately.  It also records when the bleach step should occur (so we
know when to switch between regions) and what the duration of the bleach is
(to work around the 6 second power cycling rate on the Mosaic).  It also
records the illumination to be used for the acquisition steps of the
experiment.  As such, this journal should only be run just prior to running
the experiment, when the proper illumination is selected, exposure times set,
and a representative image can be used to draw ROIs onto.  [Prerequisites] The
illumination settings should be set to the same one to use during acquiring
the experiment.  To make sure this is the case, this journal should be run
after the exposure times are properly configured and a representative image
has been snapped. The user should have previously setp the experiment's
targeting time point and pulse duration, so they can enter the same values
into the journal.  [References] The journal uses the 'load image region.jnl'
and 'load bleach region.jnl' journals to load the proper ROIs before asking to
draw the ROIs.  This will help make it easier to re-run the same experiment.
The journal uses the 'save image region.jnl' and 'save bleach region.jnl'
journals to save the ROIs to the proper location after prompting the user to
draw them. The journal will again use the 'load image region.jnl' journal at
the end to ensure the experiment is ready to begin imaging.
'''
n = 0
CurIllum = Device.Illumination.Setting
Clear_All_Regions()
Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\load image region.JNL)
Show_Message_and_Wait()
Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\save image region.JNL)
Clear_All_Regions()
Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\load bleach region.JNL)
Show_Message_and_Wait()
Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\save bleach region.JNL)
Clear_All_Regions()
Run_Journal(C:\MMpp\mmproc\journals\Mosaic As Illuminator\load image region.JNL)
Enter_Variable()
Enter_Variable()
```
